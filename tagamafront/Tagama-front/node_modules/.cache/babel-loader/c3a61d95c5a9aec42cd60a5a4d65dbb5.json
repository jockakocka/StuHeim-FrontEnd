{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dell\\\\Desktop\\\\JovanaFiles\\\\UniVienna\\\\WinterSemester2020\\\\PRAKTIKUM\\\\tagamafront\\\\Tagama-front\\\\src\\\\app\\\\module\\\\privileges\\\\privileges.container.js\";\nimport React from 'react';\nimport AddIcon from \"@material-ui/icons/Add\";\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { connect } from 'react-redux';\nimport { Link } from \"react-router-dom\";\nimport Grid from '@material-ui/core/Grid';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport GroupIcon from '@material-ui/icons/Group';\nimport { Button, LinearProgress, List, ListItem, ListItemText, Paper, Table, TableBody, TableCell, TableHead, TableRow, Typography } from '@material-ui/core';\nimport { addGroupPrivilege, addUserPrivilege, fetchAllGroupsByPrivilege, fetchAllPrivileges, fetchAllUsersByPrivilege, removeGroupPrivilege, removeUserPrivilege } from './privileges.actions';\nimport { handleLogout, hasRole, refreshToken } from '../../shared/app.properties';\nimport Redirect from 'react-router/Redirect';\n\nfunction TabContainer(props) {\n  return /*#__PURE__*/React.createElement(Typography, {\n    component: \"div\",\n    style: {\n      padding: 8 * 3\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }\n  }, props.children);\n}\n\n_c = TabContainer;\n\nclass Privileges extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      selectedPrivilege: undefined,\n      value: 0,\n      addUserDialogOpen: false\n    };\n    this.unauthorized = false;\n\n    this.handleSelectPrivilege = (event, privilege) => {\n      this.setState({\n        selectedPrivilege: privilege\n      }, () => {\n        this.props.fetchAllGroupsByPrivilege(this.state.selectedPrivilege);\n      });\n    };\n\n    this.handleTabChange = (event, value) => {\n      this.setState({\n        value\n      });\n    };\n\n    this.removeGroup = (event, group) => {\n      this.props.removeGroupPrivilege(group, this.state.selectedPrivilege);\n    };\n\n    this.removePrivilegeFromUser = (event, user) => {\n      this.props.removeUserPrivilege(user, this.state.selectedPrivilege);\n    };\n\n    this.handleAddUserDialog = status => {\n      if (status == 'open') {\n        this.setState({\n          addUserDialogOpen: true\n        });\n      } else {\n        this.setState({\n          addUserDialogOpen: false\n        });\n      }\n    };\n  }\n\n  componentWillMount() {\n    this.unauthorized = !hasRole('ROLE_ADMINISTRATION');\n    var refreshTime = new Date();\n    refreshTime.setSeconds(refreshTime.getSeconds() + 1800);\n\n    if (!localStorage.getItem('idm') || !localStorage.getItem('me')) {\n      handleLogout();\n    } else if (localStorage.getItem('idm') && new Date(JSON.parse(localStorage.getItem('idm')).expires_at) < new Date()) {\n      handleLogout();\n    } else if (localStorage.getItem('idm') && new Date(JSON.parse(localStorage.getItem('idm')).expires_at) < refreshTime) {\n      refreshToken();\n    }\n  }\n\n  componentDidMount() {\n    this.props.fetchAllPrivileges();\n\n    if (this.state.selectedPrivilege != undefined) {\n      this.props.fetchAllGroupsByPrivilege(this.state.selectedPrivilege);\n    }\n  }\n\n  render() {\n    if (this.props.allprivileges != undefined && this.state.selectedPrivilege == undefined) {\n      this.setState({\n        selectedPrivilege: this.props.allprivileges[0]\n      });\n    }\n\n    if (this.state.selectedPrivilege != undefined && this.props.allgroupsdata == undefined) {\n      this.props.fetchAllGroupsByPrivilege(this.state.selectedPrivilege);\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"privileges\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 13\n      }\n    }, localStorage.getItem('idm') && localStorage.getItem('me') && this.unauthorized && /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/app/error/unauthorized\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        margin: 30 + \"px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      spacing: 24,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      md: 4,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Paper, {\n      style: {\n        margin: 5 + \"px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(List, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 33\n      }\n    }, this.props.allprivileges && this.props.allprivileges.map((privilege, index) => {\n      return /*#__PURE__*/React.createElement(ListItem, {\n        button: true,\n        selected: this.state.selectedPrivilege && this.state.selectedPrivilege.id === privilege.id,\n        onClick: event => this.handleSelectPrivilege(event, privilege),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 49\n        }\n      }, /*#__PURE__*/React.createElement(ListItemText, {\n        primary: privilege.name,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 53\n        }\n      }));\n    })))), /*#__PURE__*/React.createElement(Grid, {\n      md: 8,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Paper, {\n      style: {\n        padding: 20 + \"px\",\n        margin: 5 + \"px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 29\n      }\n    }, this.props.loading == true ? /*#__PURE__*/React.createElement(LinearProgress, {\n      color: \"secondary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 63\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        height: 5 + 'px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(Typography, {\n      variant: \"h5\",\n      component: \"h2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 73\n      }\n    }, this.state.selectedPrivilege && this.state.selectedPrivilege.name)), /*#__PURE__*/React.createElement(Tabs, {\n      value: this.state.value,\n      onChange: this.handleTabChange,\n      indicatorColor: \"primary\",\n      textColor: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Tab, {\n      value: 0,\n      label: \"Groups\",\n      icon: /*#__PURE__*/React.createElement(GroupIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 73\n        }\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 37\n      }\n    })), this.state.value === 0 && this.state.selectedPrivilege && /*#__PURE__*/React.createElement(TabContainer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 92\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: '/app/privileges/' + this.state.selectedPrivilege.id + '/groups',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      \"aria-label\": \"Add\",\n      className: \"btns \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(AddIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 45\n      }\n    }), \" Add groups\")), /*#__PURE__*/React.createElement(Table, {\n      className: \"table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(TableHead, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(TableRow, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 49\n      }\n    }, \"ID\"), /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 49\n      }\n    }, \"Name\"), /*#__PURE__*/React.createElement(TableCell, {\n      style: {\n        width: 100 + \"px\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 49\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"text-center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 90\n      }\n    }, \"Actions\")))), /*#__PURE__*/React.createElement(TableBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 41\n      }\n    }, this.props.allgroupsdata ? this.props.allgroupsdata.map((group, index) => {\n      return /*#__PURE__*/React.createElement(TableRow, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 57\n        }\n      }, /*#__PURE__*/React.createElement(TableCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 61\n        }\n      }, group.id), /*#__PURE__*/React.createElement(TableCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 61\n        }\n      }, group.name), /*#__PURE__*/React.createElement(TableCell, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 61\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        onClick: event => this.removeGroup(event, group),\n        variant: \"contained\",\n        color: \"secondary\",\n        \"aria-label\": \"Delete\",\n        className: \"btns pull-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 65\n        }\n      }, /*#__PURE__*/React.createElement(DeleteIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 69\n        }\n      }))));\n    }) : ''))))))));\n  }\n\n}\n\nvar mapStateToProps = state => {\n  return {\n    allusersdata: state.privilegesReducer.allusersdata,\n    allgroupsdata: state.privilegesReducer.allgroupsdata,\n    allprivileges: state.privilegesReducer.allprivilegesdata,\n    loading: state.privilegesReducer.loading\n  };\n};\n\nexport default connect(mapStateToProps, {\n  fetchAllPrivileges,\n  fetchAllUsersByPrivilege,\n  fetchAllGroupsByPrivilege,\n  removeUserPrivilege,\n  removeGroupPrivilege,\n  addUserPrivilege,\n  addGroupPrivilege\n})(Privileges);\n\nvar _c;\n\n$RefreshReg$(_c, \"TabContainer\");","map":{"version":3,"sources":["C:/Users/Dell/Desktop/JovanaFiles/UniVienna/WinterSemester2020/PRAKTIKUM/tagamafront/Tagama-front/src/app/module/privileges/privileges.container.js"],"names":["React","AddIcon","DeleteIcon","connect","Link","Grid","Tabs","Tab","GroupIcon","Button","LinearProgress","List","ListItem","ListItemText","Paper","Table","TableBody","TableCell","TableHead","TableRow","Typography","addGroupPrivilege","addUserPrivilege","fetchAllGroupsByPrivilege","fetchAllPrivileges","fetchAllUsersByPrivilege","removeGroupPrivilege","removeUserPrivilege","handleLogout","hasRole","refreshToken","Redirect","TabContainer","props","padding","children","Privileges","Component","state","selectedPrivilege","undefined","value","addUserDialogOpen","unauthorized","handleSelectPrivilege","event","privilege","setState","handleTabChange","removeGroup","group","removePrivilegeFromUser","user","handleAddUserDialog","status","componentWillMount","refreshTime","Date","setSeconds","getSeconds","localStorage","getItem","JSON","parse","expires_at","componentDidMount","render","allprivileges","allgroupsdata","margin","map","index","id","name","loading","height","width","mapStateToProps","allusersdata","privilegesReducer","allprivilegesdata"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport AddIcon from \"@material-ui/icons/Add\"\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport { connect } from 'react-redux'\r\nimport { Link } from \"react-router-dom\";\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport GroupIcon from '@material-ui/icons/Group'\r\nimport {\r\n    Button,\r\n    LinearProgress,\r\n    List,\r\n    ListItem,\r\n    ListItemText,\r\n    Paper,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableRow,\r\n    Typography\r\n} from '@material-ui/core';\r\nimport {\r\n    addGroupPrivilege,\r\n    addUserPrivilege,\r\n    fetchAllGroupsByPrivilege,\r\n    fetchAllPrivileges,\r\n    fetchAllUsersByPrivilege,\r\n    removeGroupPrivilege,\r\n    removeUserPrivilege\r\n} from './privileges.actions';\r\nimport { handleLogout, hasRole, refreshToken } from '../../shared/app.properties';\r\nimport Redirect from 'react-router/Redirect';\r\n\r\n\r\nfunction TabContainer(props) {\r\n    return (\r\n        <Typography component=\"div\" style={{ padding: 8 * 3 }}>\r\n            {props.children}\r\n        </Typography>\r\n    );\r\n}\r\n\r\n\r\nclass Privileges extends React.Component {\r\n\r\n    state = {\r\n        selectedPrivilege: undefined,\r\n        value: 0,\r\n        addUserDialogOpen: false\r\n    }\r\n    unauthorized = false;\r\n\r\n    componentWillMount() {\r\n        this.unauthorized = !hasRole('ROLE_ADMINISTRATION');\r\n        let refreshTime = new Date();\r\n        refreshTime.setSeconds(refreshTime.getSeconds() + 1800);\r\n\r\n        if (!localStorage.getItem('idm') || !localStorage.getItem('me')) {\r\n            handleLogout()\r\n        } else if (localStorage.getItem('idm') && new Date(JSON.parse(localStorage.getItem('idm')).expires_at) < new Date()) {\r\n            handleLogout()\r\n        } else if (localStorage.getItem('idm') && new Date(JSON.parse(localStorage.getItem('idm')).expires_at) < refreshTime) {\r\n            refreshToken()\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.props.fetchAllPrivileges();\r\n        if (this.state.selectedPrivilege != undefined) {\r\n            this.props.fetchAllGroupsByPrivilege(this.state.selectedPrivilege);\r\n        }\r\n    }\r\n\r\n    handleSelectPrivilege = (event, privilege) => {\r\n\r\n\r\n        this.setState({ selectedPrivilege: privilege }, () => {\r\n            this.props.fetchAllGroupsByPrivilege(this.state.selectedPrivilege);\r\n\r\n        });\r\n    }\r\n\r\n    handleTabChange = (event, value) => {\r\n\r\n        this.setState({ value });\r\n    };\r\n\r\n    removeGroup = (event, group) => {\r\n        this.props.removeGroupPrivilege(group, this.state.selectedPrivilege);\r\n    }\r\n\r\n    removePrivilegeFromUser = (event, user) => {\r\n        this.props.removeUserPrivilege(user, this.state.selectedPrivilege);\r\n    }\r\n\r\n    handleAddUserDialog = (status) => {\r\n        if (status == 'open') {\r\n            this.setState({ addUserDialogOpen: true });\r\n        } else {\r\n            this.setState({ addUserDialogOpen: false });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        if (this.props.allprivileges != undefined && this.state.selectedPrivilege == undefined) {\r\n            this.setState({ selectedPrivilege: this.props.allprivileges[0] });\r\n        }\r\n        if (this.state.selectedPrivilege != undefined && this.props.allgroupsdata == undefined) {\r\n            this.props.fetchAllGroupsByPrivilege(this.state.selectedPrivilege);\r\n        }\r\n        return (\r\n            <div className=\"privileges\">\r\n                {localStorage.getItem('idm') && localStorage.getItem('me') && this.unauthorized &&\r\n                    <Redirect to=\"/app/error/unauthorized\" />\r\n                }\r\n                <div style={{ margin: 30 + \"px\" }}>\r\n                    <Grid container spacing={24}>\r\n                        <Grid md={4}>\r\n                            <Paper style={{ margin: 5 + \"px\" }}>\r\n                                <List>\r\n                                    {\r\n                                        this.props.allprivileges && this.props.allprivileges.map((privilege, index) => {\r\n                                            return (\r\n\r\n                                                <ListItem\r\n                                                    button\r\n                                                    selected={this.state.selectedPrivilege && this.state.selectedPrivilege.id === privilege.id}\r\n                                                    onClick={event => this.handleSelectPrivilege(event, privilege)}\r\n                                                >\r\n                                                    <ListItemText primary={privilege.name} />\r\n                                                </ListItem>\r\n\r\n                                            )\r\n                                        })}\r\n\r\n\r\n                                </List>\r\n\r\n                            </Paper>\r\n                        </Grid>\r\n\r\n                        <Grid md={8}>\r\n                            <Paper style={{ padding: 20 + \"px\", margin: 5 + \"px\" }}>\r\n                                {this.props.loading == true ? <LinearProgress color=\"secondary\" /> :\r\n                                    <div style={{ height: 5 + 'px' }}></div>}\r\n\r\n                                <Typography variant=\"h5\" component=\"h2\"><strong>{this.state.selectedPrivilege && this.state.selectedPrivilege.name}</strong></Typography>\r\n\r\n                                <Tabs\r\n                                    value={this.state.value}\r\n                                    onChange={this.handleTabChange}\r\n                                    indicatorColor=\"primary\"\r\n                                    textColor=\"primary\"\r\n                                >\r\n                                    <Tab value={0} label=\"Groups\" icon={<GroupIcon />} />\r\n                                </Tabs>\r\n\r\n                                {this.state.value === 0 && this.state.selectedPrivilege && <TabContainer>\r\n\r\n                                    <Link to={'/app/privileges/' + this.state.selectedPrivilege.id + '/groups'}>\r\n                                        <Button variant=\"contained\" color=\"primary\" aria-label=\"Add\" className='btns '>\r\n                                            <AddIcon /> Add groups\r\n                                        </Button>\r\n                                    </Link>\r\n\r\n                                    <Table className='table'>\r\n                                        <TableHead>\r\n\r\n                                            <TableRow>\r\n                                                <TableCell>ID</TableCell>\r\n                                                <TableCell>Name</TableCell>\r\n                                                <TableCell style={{ width: 100 + \"px\" }}><p\r\n                                                    className=\"text-center\">Actions</p></TableCell>\r\n                                            </TableRow>\r\n                                        </TableHead>\r\n                                        <TableBody>\r\n                                            {\r\n                                                this.props.allgroupsdata ? this.props.allgroupsdata.map((group, index) => {\r\n                                                    return (\r\n                                                        <TableRow>\r\n                                                            <TableCell>{group.id}</TableCell>\r\n                                                            <TableCell>{group.name}</TableCell>\r\n                                                            <TableCell>\r\n                                                                <Button\r\n                                                                    onClick={event => this.removeGroup(event, group)}\r\n                                                                    variant=\"contained\" color=\"secondary\"\r\n                                                                    aria-label=\"Delete\" className='btns pull-right'>\r\n                                                                    <DeleteIcon />\r\n                                                                </Button>\r\n                                                            </TableCell>\r\n                                                        </TableRow>\r\n                                                    )\r\n                                                }) : ''\r\n                                            }\r\n                                        </TableBody>\r\n                                    </Table>\r\n\r\n\r\n                                </TabContainer>}\r\n                            </Paper>\r\n                        </Grid>\r\n                    </Grid>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        allusersdata: state.privilegesReducer.allusersdata,\r\n        allgroupsdata: state.privilegesReducer.allgroupsdata,\r\n        allprivileges: state.privilegesReducer.allprivilegesdata,\r\n        loading: state.privilegesReducer.loading\r\n    }\r\n};\r\n\r\nexport default connect(mapStateToProps, ({\r\n    fetchAllPrivileges, fetchAllUsersByPrivilege, fetchAllGroupsByPrivilege,\r\n    removeUserPrivilege,\r\n    removeGroupPrivilege,\r\n    addUserPrivilege,\r\n    addGroupPrivilege\r\n}))(Privileges);\r\n\r\n"]},"metadata":{},"sourceType":"module"}